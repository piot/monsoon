# generated by cmake-generator
cmake_minimum_required(VERSION 3.16.3)

add_library(monsoon STATIC decoder.c)

include(Tornado.cmake)
set_tornado(monsoon)

target_include_directories(monsoon PUBLIC ../include ../external/include)

# Opus find_package(Opus REQUIRED) target_include_directories(monsoon PUBLIC
# ${OPUS_INCLUDE_DIRS} "${OPUS_INCLUDE_DIRS}/opus")
# target_link_libraries(monsoon PUBLIC ${OPUS_LIBRARIES})

file(REAL_PATH ../external/${OS_NAME}/${CPU_ARCHITECTURE}/ PLATFORM_LIB_DIR)

target_link_libraries(monsoon PUBLIC clog)

if (COMPILER_CLANG AND OS_LINUX)
    target_compile_options(monsoon PRIVATE -Wno-reserved-macro-identifier)
endif ()

if (OS_LINUX)
    target_link_libraries(monsoon PUBLIC m) # opus is using math functions
endif ()

if (OS_WINDOWS)
    target_link_libraries(
            monsoon PUBLIC ${PLATFORM_LIB_DIR}/opusfile.lib ${PLATFORM_LIB_DIR}/opus.lib
            ${PLATFORM_LIB_DIR}/ogg.lib)
elseif (OS_LINUX OR OS_MACOS)
    target_link_libraries(monsoon PUBLIC ${PLATFORM_LIB_DIR}/libopusfile.a
            ${PLATFORM_LIB_DIR}/libopus.a ${PLATFORM_LIB_DIR}/libogg.a)
else ()
    message(FATAL_ERROR "unknown platform")
endif ()
